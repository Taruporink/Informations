# Discordの使い方( チムメン向け )

## このページについて

Discordサーバー「進撃の巨人」では, レート計算機Bot(通称みにたるぽちゃん)を導入していて, 指定されたチャンネルでいくつかの機能を使うことができます.

- レート報告所
- 財宝通知
- music-bot

使い方がややこしい部分もあるのでチムメンに向けて使い方や注意点などをこのページにまとめておきます．

## 目次
ちょっと長いので目次とページ内リンクを作っておきます.

適所に飛んで読んでください．

- [レート報告所の使い方](#chapter1)
    - [まず，グループに参加したら...](#chapter1-1)
    - [基本的な使い方](#chapter1-2)
    - [使えるコマンドの一覧](#chapter1-3)
    - [注意点](#chapter1-4)
- [財宝通知](#chapter2)
    - [通知について](#chapter2-1)
- [music-bot](#chapter3)
    - [Rythmとは](#chapter3-1)
    - [基本的な使い方①(Youtubeから)](#chapter3-2)
    - [基本的な使い方②(直接)](#chapter3-3)
    - [他のコマンド](#chapter3-4)



<a id="chapter1"></a>

## レート報告所

レート報告所では, 用意されたコマンドを利用して稼いだレートの計上と確認ができます.

<a id="chapter1-1"></a>

### まず，グループに参加したら...

レート報告所チャンネルで，

```
add 0
```

と送信してください．

ユーザー登録的なものだと思ってもらえれば！

<a id="chapter1-2"></a>

### 基本的な使い方

最低限の使い方としては, **add** や **add2** コマンドを使ってレートを報告していき, **team** や **graph** などのコマンドでレートの状況を確認するという流れです.

**add** は個人用, **add2** はペア込みでレート報告できるコマンドで,  **team** や **graph** はチームレート確認用のコマンドです.

他にもいくつかコマンドが用意されているので, 詳しくは次項の [使えるコマンドの一覧](#chapter1-3) を参照してください.

``` markup
[ユーザー] add 100
[ボット] レートを報告しました! 合計レート100!
[ユーザー] add2 @Yamada#3555(メンション) -80
[ボット] レートを報告しました!
[ユーザー] team
[ボット] チームレート: 1000, Aさん: 500, Bさん : 500
```

みたいなイメージです.

ちなみに, レート報告所の機能はみにたるぽちゃんとの個人チャットでも使うことができます.

個人チャットではメンションができないのでメンションが必要なコマンドは無理ですが, 他のコマンドは利用可能です.

<a id="chapter1-3"></a>

### 使えるコマンドの一覧

前項で紹介した基本的なコマンド以外にも以下のコマンドを，使用例のように送信することで使うことができます．

また, メンバーの消去やリセットなどのコマンドは管理者のみが行うことができるようになっています.

管理者権限が必要なコマンドには, [管]テーブルに印がついています.

| 管 | コマンド | 説明 | 使用例 |
| :---: | :--- | :--- | :--- |
|  | help | 簡単な使い方のガイド | help |
|  | add <レート> | レートを計上 | add 100 |
|  | add2 @ペア(メンション) <レート> | ペアとセットでレートを計上 | add2 @yamada -100 |
|  | cancel | １個前のadd/add2をキャンセル | cancel |
|  | myrate | 自分の稼いだレートを表示 | myrate |
|  | history | 自分のレート変動履歴を表示 | history |
|  | team | メンバーの稼いだレートを表示 | team |
|  | graph | teamのグラフ版 | graph |
| ☆ | manager @誰か(メンション) | メンションした人を管理者に | manager @yamada |
| ☆ | del @誰か(メンション) | メンションした人を削除 | del @yamada |
| ☆ | reset | チームの情報を消去 | reset |
| ☆ | confirm | manager/del/resetの確定 | confirm |
| ☆ | restore | manager/del/resetの取り消し | restore |

<a id="chapter1-4"></a>

### 注意点

- add, add2, cancel, manager, del, reset, confirm, restoreはクラウドにデータを送信しているので返信にやや時間がかかります.
- 1日のアクセス制限が100回までという制約があるので, 上述のクラウドとのやり取りがあるコマンドは100回/日までにしてください. 同時に, add/add2はまとめて報告することをおすすめします.
- cancelは自分限定ではなく, チーム全体で1個前の処理を取り消します.
- 僕が作った不安定なシステムなので，バグったりすることがよくあります. Botが強制的に再起動したら処理が実行できてない可能性がありますので注意してください.
- 利用しているサービスの仕様上, 約24時間に1回再起動が入りますがお気になさらず.
- teamコマンドでは, 個人が稼いだ総レートをもとに推定した層の情報も一応表示してますが正確であるとは限らないので参考までにどうぞ.

<a id="chapter2"></a>

## 財宝通知

財宝通知は，財宝が出たことをメンバーに通知で知らせたいときに使うチャンネルです．

財宝通知チャンネルで，

```
財宝
```

とメッセージを送れば，
*(受け手側が端末の設定で通知を切ってなければ)*
参加者全員に通知が行きます．

<a id="chapter2-1"></a>

### 通知について

通知が来ない原因は，

1. ディスコの通知設定
2. 端末の通知設定
3. おやすみモード

の3種類が考えられます．

#### 1. ディスコの通知設定

(画面上部の)財宝通知 => 通知設定と進み，通知設定を@メンションのみに設定すればOKです．

#### 2. 端末の通知設定

2は，(本体の)設定 => 通知 => Discordと進んでオフられてないか確認してください．

#### 3. おやすみモード

3は，(本体の)設定 => おやすみモード => 通知:常に知らせない，になってるとおやすみモード中は通知が来ないので「ロック中は知らせない」にするなり，おやすみモードを切るなりしてください！

同様に，通知が来て困る方は①の設定を「通知しない」に変えるようにしてください．時間で昼間は無理とかなら，おやすみモードを上手く使って各自対策をするようにお願いします！ちなみに，手動でオンオフ切り替えなくても毎日指定の時間に自動でおやすみモードにする機能がiPhoneにはついてたりします！

<a id="chapter3"></a>

## music-bot

music-botは，RythmというBotを操作するためのチャンネルです．

前述のディスコの通知設定を参考に，music-botの通知は切っておくことをオススメします．

<a id="chapter3-1"></a>

### Rythmとは

[Rythm](https://rythmbot.co/)
とは，youtubeなどのリンクを渡すことで，ボイスチャンネルに音楽を流してくれるパブリックボットです．

そして，Rythmに関する操作を行うチャンネルが
*music-botチャンネル*
です．

ここに，決められたコマンドを入力することで音楽の再生なり，操作をすることができます．

<a id="chapter3-2"></a>

### 基本的な使い方①(Youtubeから)

1. 音楽を流したいボイスチャンネルに接続する
2. music-botチャンネルにて，
```
!join
```
と送信する(これでRythmがボイスチャンネルに参加する)

3. 流したい音楽のURLをYoutubeとかから引っ張ってくる

4. music-botチャンネルで，
```
!p <音楽のURL>
```
と送信する => これで再生される

5. Rythmがうるさくなったら，
```
!stop
```
で停止されます．
再び再生したければ，
```
!p
```
を送ればまた再生してくれます👍

6. 用済みになったら蹴ってあげてください
```
!disconnect
```
で勝手に出ていきます．

<a id="chapter3-3"></a>

### 基本的な使い方②(直接)

①では，手動でYoutubeから引っ張ってきましたが，Rythmの!searchコマンドでは，youtubeの検索結果を表示して，選んだ音楽を流して貰うこともできます．

オクラホマミキサーを聞きたいときどう操作すればいいかという例で説明します．

1. ボイスチャンネルに接続し，!joinでRythmを追加
2. 検索をかける
```
!search オクラホマミキサー
```
すると，
```
1 オクラホマミキサー踊ってみた！
2 オクラホマミキサー引いてみた！
3 オクラホマミキサー(ピアノ伴奏)
```
みたいな感じでオクラホマミキサーの検索結果が表示されます．

3. 検索結果から選びます．選び方は，
```
3
```
と数字を送ればOKです．

4. 再生される！！！わーい！

<a id="chapter3-4"></a>

### 他のコマンド

一部だけ他に使えるコマンドも紹介しますが，詳しくは
[公式サイト](https://rythmbot.co/features)
を参照してください．

また，コマンドにはエイリアス(ニックネームみたいなもの)が複数用意されていて，例えば!playと!pは同じ動作をします．そんな感じで，以下の表のコマンド欄には複数のコマンドが載ってることもあるけど，同じ動作をしてくれます．

| コマンド | 説明 |
| :--- | :--- |
| !skip, !next, !s | 次の曲へ |
| !cl, !clear | 再生待ちの曲を削除 |
| !shuffle | 再生待ちの曲をシャッフル |
| !loop, !repeat | 再生中の曲をリピート |

長くなりましたが，これで終わります．

読んでわからないところがあれば遠慮なく聞いてください！
